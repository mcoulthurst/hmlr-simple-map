{% macro hmlrSimpleMap(params) %}

  {% set width = params.width or '960px' %}
  {% set height = params.height or '540px' %}

  {#% if params.style %}
    {% for key, value in params.style %}
      <br/><span class="key">key: {{ key }}:</span>
      {% if value is mapping %}
        {% for nestedKey, nestedValue in value %}
          <br/><span class="key"> nestedKey {{ nestedKey }}:</span> 
          {% if nestedValue is iterable and nestedValue is not string %}
            <span class="value">iterable nestedValue: [{{ nestedValue | join(", ") }}]</span>
          {% else %}
            <span class="value">nestedValue: {{ nestedValue }}</span>
          {% endif %}
        {% endfor %}
      {% else %}
        <span class="value">{{ value }}</span>
      {% endif %}
    {% endfor %}
  {% endif %#}



  <figure class="hmlr-map-wrapper">
    <div class="hmlr-map" style="height:{{ height }}; width:{{ width }}"
      aria-label="{{params.alt}}" role="img" title="{{params.alt}}"
      data-coords="[{{ params.coords }}]" 
      data-zoom="{{ params.zoom }}" 
      data-interactive="{{ params.interactive }}" 
      data-path_to_geometry="{{ params.path_to_geometry }}" 
      data-style="{{ params.style | dump }}" 
      data-tileurl="{{ params.tile_url }}" 
      tabIndex="0">
    </div>

    <figcaption class="govuk-body-s govuk-!-margin-top-2">
      {{ params.caption }}<br/> 
      {{ params.tile_url }}
      {# Centered on:
      {{ params.coords }}, zoom level: {{ params.zoom }}
      <br/>
      Alt text: {{ params.alt }}
      <br/>
      Style: {{ params.style | dump }}
       #}
    </figcaption>
  </figure>

  
  <script src="https://cdn.jsdelivr.net/npm/ol@10.3.1/dist/ol.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/proj4@2.12.1/dist/proj4.js"></script>

{% endmacro %}